{"version":3,"sources":["../../src/pages/admin-aboutus/admin-aboutus.module.ts","../../src/pages/admin-aboutus/admin-aboutus.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACG;AAUnD;IAAA;IAAqC,CAAC;IAAzB,sBAAsB;QARlC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,wEAAgB;aACjB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC;aAC3C;SACF,CAAC;OACW,sBAAsB,CAAG;IAAD,6BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;ACZ8B;AACyB;AACf;AACoB;AACxC;AACiD;AAExG;;;;;GAKG;AAOH;IAgBE,0BAAoB,yBAAmD,EAC7D,SAAsB,EAAS,SAA0B,EAAU,UAAoC,EAAU,MAA0B,EAAU,QAAwB,EAAS,OAAsB,EAAS,SAAoB;QAD/N,8BAAyB,GAAzB,yBAAyB,CAA0B;QAC7D,cAAS,GAAT,SAAS,CAAa;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAU,eAAU,GAAV,UAAU,CAA0B;QAAU,WAAM,GAAN,MAAM,CAAoB;QAAU,aAAQ,GAAR,QAAQ,CAAgB;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAdnP,iBAAY,GAAG;YACb,gBAAgB,EAAE,EAAE;YACpB,KAAK,EAAE,EAAE;YACT,MAAM,EAAE,EAAE;YACV,SAAS,EAAE,EAAE;YACb,MAAM,EAAC,IAAI;YACX,WAAW,EAAE,IAAI;SAClB;QACD,oBAAe,GAAG,IAAI,CAAC;QACvB,0BAAqB,GAAG,EAAE,CAAC;QAC3B,iEAAiE;QACjE,oBAAe,GAAG,EAAE;QACpB,cAAS,GAAG,KAAK;IAGjB,CAAC;IACD,iCAAM,GAAN;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC;IACnC,CAAC;IACD,0CAAe,GAAf;QACE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IACD,yCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;IACjD,CAAC;IACD,2CAAgB,GAAhB;QACE,IAAI,CAAC,iBAAiB,EAAE;IAC1B,CAAC;IACD,4CAAiB,GAAjB;QAAA,iBAaC;QAZC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;QAC9B,IAAI,CAAC,yBAAyB,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,aAAG;YAClD,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE;YAC5B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAChB,IAAI,MAAM,GAAQ,GAAG;YACrB,IAAI,MAAM,CAAC,UAAU,EAAE;gBACrB,KAAI,CAAC,eAAe,GAAG,MAAM,CAAC,IAAI;gBAClC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,eAAe;aACzC;QACH,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;YACV,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE;QAC9B,CAAC,CAAC;IACJ,CAAC;IACD,yCAAc,GAAd;QACE,IAAI,OAAO,GAAG,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QAC5G,IAAI,YAAY,GAAG,OAAO,CAAC,YAAY,CAAC;QACxC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,YAAY,GAAG,IAAI,CAAC;QAC3C,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,YAAY,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;IAClG,CAAC;IACD,6CAAkB,GAAlB,UAAmB,MAAM;QACvB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QAC9F,IAAI,SAAS,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,CAAqB,CAAC;QAC3E,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;QACvB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,CAAC;QACjC,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,EAAE,EAAE;YACpC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,EAAE,CAAC;YACjC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,yCAAyC,CAAC;SACpE;IACH,CAAC;IACD,0CAAe,GAAf,UAAgB,QAAQ;QACtB,OAAO,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC;IACD,6CAAkB,GAAlB,UAAmB,QAAQ;QACzB,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YACzD,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAC7C,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aACnC;SACF;IACH,CAAC;IACD,wCAAa,GAAb;QACE,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,IAAI,EAAE,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,IAAI,EAAE;YACjE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,wCAAwC,CAAC,CAAC;;YAEnE,IAAI,CAAC,mBAAmB,EAAE;IAC9B,CAAC;IACD,8CAAmB,GAAnB;QAAA,iBAmCC;QAlCC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;QAC9B,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,EAAE;YAChC,IAAI,CAAC,yBAAyB,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,aAAG;gBACtE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;gBAChB,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,GAAG;gBAC7B,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,YAAY;gBACxC,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE;gBAC5B,KAAI,CAAC,MAAM,CAAC,YAAY,CAAC,sBAAsB,CAAC;gBAEhD,qBAAqB;gBACrB,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC;oBACjC,KAAI,CAAC,WAAW,EAAE;;oBAElB,KAAI,CAAC,iBAAiB,EAAE;YAC5B,CAAC,CAAC;iBACC,KAAK,CAAC,aAAG;gBACR,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;gBAChB,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE;gBAC5B,KAAI,CAAC,MAAM,CAAC,YAAY,CAAC,0DAA0D,CAAC;YACtF,CAAC,CAAC;SACL;aACI;YACH,qBAAqB;YACrB,IAAI,CAAC,yBAAyB,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC;gBAC3E,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE;gBAC5B,qBAAqB;gBACrB,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC;oBACjC,KAAI,CAAC,WAAW,EAAE;;oBAElB,KAAI,CAAC,iBAAiB,EAAE;YAC5B,CAAC,CAAC,CAAC,KAAK,CAAC,aAAG;gBACV,KAAI,CAAC,MAAM,CAAC,cAAc,EAAE;YAC9B,CAAC,CAAC;SACH;IACH,CAAC;IACD,sCAAW,GAAX;QAAA,iBA6BC;QA5BC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,4BAA4B,CAAC;QACxD,IAAI,WAAW,GAAG,EAAE;QACpB,KAAkB,UAAoB,EAApB,SAAI,CAAC,eAAe,EAApB,cAAoB,EAApB,IAAoB;YAAjC,IAAI,KAAK;YACZ,WAAW,CAAC,IAAI,CACd,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC,IAAI,CAClD,aAAG;gBACD,YAAY;gBACZ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;gBAChB,qBAAqB;gBACrB,KAAI,CAAC,UAAU,CAAC,+BAA+B,CAAC,GAAG,EAAE,SAAS,EAAE,KAAI,CAAC,eAAe,CAAC,EAAE,CAAC;YAC1F,CAAC,CACF,CAAC,KAAK,CAAC,aAAG;gBACT,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC;YAClB,CAAC,CAAC,CACH;SACF;QACD,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM;YAC5C,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC;YACnC,UAAU,CAAC;gBACT,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE;gBAC5B,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAC3B,CAAC,EAAE,IAAI,CAAC,CAAC;YACT,IAAI,CAAC,eAAe,GAAC,EAAE;QACzB,CAAC,CAAC;aACC,KAAK,CAAC,aAAG;YACR,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC;IAED,iDAAsB,GAAtB;QACE,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC;QACvE,IAAI,CAAC,SAAS,GAAG,IAAI;IACvB,CAAC;IACD,kDAAuB,GAAvB;QACE,IAAI,CAAC,SAAS,GAAG,KAAK;QACtB,IAAI,CAAC,qBAAqB,GAAG,EAAE;IACjC,CAAC;IACD,8CAAmB,GAAnB;QACE,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC;IACzE,CAAC;IACD,6CAAkB,GAAlB,UAAmB,IAAI;QACrB,IAAI,IAAI,IAAI,IAAI;YACd,IAAI,CAAC,qBAAqB,GAAG,EAAE;;YAE/B,KAAK,IAAI,CAAC,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;gBAC/D,IAAI,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;oBAC1C,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBACzC;aACF;IACL,CAAC;IACD,uCAAY,GAAZ,UAAa,OAAO;QAClB,IAAI,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACvD,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;IAC5D,CAAC;IACD,mDAAwB,GAAxB;QAAA,iBA8CC;QA7CC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qBAAqB,CAAC,EAAE;YAChG,qCAAqC;YACrC,IAAI,CAAC,uBAAuB,EAAE;SAC/B;aACI;YACH,IAAI,OAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBAChC,KAAK,EAAE,OAAO;gBACd,OAAO,EAAE,0CAA0C;gBACnD,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,OAAO;wBACb,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE;4BACP,OAAK,CAAC,OAAO,EAAE,CAAC;wBAClB,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,IAAI;wBACV,OAAO,EAAE;4BACP,KAAI,CAAC,MAAM,CAAC,cAAc,CAAC,kBAAkB,CAAC;4BAC9C,IAAI,aAAa,GAAG,KAAI,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,WAAC,IAAI,YAAI,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAA5C,CAA4C,CAAC,CAAC;4BAC7G,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC;4BAC1B,IAAI,WAAW,GAAG,EAAE;4BACpB,KAAiB,UAAa,EAAb,+BAAa,EAAb,2BAAa,EAAb,IAAa;gCAAzB,IAAI,IAAI;gCACX,+CAA+C;gCAC/C,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;6BAChE;4BACD,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,KAAI,CAAC,qBAAqB,EAAE,SAAS,EAAE,KAAI,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC,CAAC;4BAC1H,IAAI,IAAI,GAAG,KAAI,CAAC;4BAChB,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM;gCAC5C,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE;gCAC5B,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,oBAAoB,CAAC;gCAC9C,IAAI,CAAC,uBAAuB,EAAE,CAAC;gCAC/B,IAAI,CAAC,iBAAiB,EAAE,CAAC;4BAC3B,CAAC,CAAC;iCACC,KAAK,CAAC,aAAG;gCACR,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE;gCAC5B,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,0DAA0D,CAAC;4BACtF,CAAC,CAAC,CAAC;wBACP,CAAC;qBACF;iBACF;aACF,CAAC,CAAC;YACH,OAAK,CAAC,OAAO,EAAE,CAAC;SACjB;IACH,CAAC;IAvNiC;QAAjC,gEAAS,CAAC,qBAAqB,CAAC;kCAAsB,yDAAU;iEAAC;IADvD,gBAAgB;QAJ5B,gEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;mKAiB8C,kHAAyB;YACnD,YAAY,CAAmN;OAjBxO,gBAAgB,CA0N5B;IAAD,CAAC;AAAA;SA1NY,gBAAgB,gB","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdminAboutusPage } from './admin-aboutus';\n\n@NgModule({\n  declarations: [\n    AdminAboutusPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdminAboutusPage),\n  ],\n})\nexport class AdminAboutusPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-aboutus/admin-aboutus.module.ts","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, MenuController, AlertController } from 'ionic-angular';\nimport { GlobalheroProvider } from '../../providers/globalhero/globalhero';\nimport { FirebaseServicesProvider } from '../../providers/firebase-services/firebase-services';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport { aboutusFirebaseController } from '../../providers/firebase-services/aboutusFirebaseController';\n\n/**\n * Generated class for the AdminAboutusPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'AdminAboutusPage',\n  segment: 'admin/aboutus',\n  defaultHistory: ['AdminPage']\n}\n)\n@Component({\n  selector: 'page-admin-aboutus',\n  templateUrl: 'admin-aboutus.html',\n})\nexport class AdminAboutusPage {\n  @ViewChild('aboutusContentInput') aboutusContentInput: ElementRef;\n\n  aboutUsInput = {\n    shortDescription: '',\n    title: '',\n    detail: '',\n    mediaList: [],\n    status:true,\n    lastUpdated: null\n  }\n  originalAboutUS = null;\n  modificationMediaList = [];\n  /////////////////////////////////////////////////////////////////\n  mediaListToSend = []\n  editMedia = false\n  constructor(private aboutusFirebaseController:aboutusFirebaseController,\n    private sanitizer:DomSanitizer,private alertCtrl: AlertController, private fbservices: FirebaseServicesProvider, private global: GlobalheroProvider, private menuCrtl: MenuController, public navCtrl: NavController, public navParams: NavParams) {\n  }\n  goHome() {\n    this.navCtrl.setRoot('AdminPage')\n  }\n  sideMenuTrigger() {\n    this.menuCrtl.open();\n  }\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad AdminAboutusPage');\n  }\n  ionViewWillEnter() {\n    this.getCurrentAboutUS()\n  }\n  getCurrentAboutUS() {\n    this.global.presentLoading('')\n    this.aboutusFirebaseController.getAboutUS().then(res => {\n      this.global.dismissLoading()\n      console.log(res)\n      let result = <any>res\n      if (result.hasContent) {\n        this.originalAboutUS = result.data\n        this.aboutUsInput = this.originalAboutUS\n      }\n    }).catch(err => {\n      this.global.dismissLoading()\n    })\n  }\n  textAreaResize() {\n    var element = this.aboutusContentInput['_elementRef'].nativeElement.getElementsByClassName(\"text-input\")[0];\n    var scrollHeight = element.scrollHeight;\n    element.style.height = scrollHeight + 'px';\n    this.aboutusContentInput['_elementRef'].nativeElement.style.height = (scrollHeight + 16) + 'px';\n  }\n  fileChangeListener($event): void {\n    this.mediaListToSend = this.mediaListToSend.concat(this.fileListToArray($event.target.files));\n    let fileinput = document.getElementById(\"fileInputId\") as HTMLInputElement;\n    fileinput.value = null;\n    console.log(this.mediaListToSend)\n    if (this.mediaListToSend.length > 10) {\n      this.mediaListToSend.length = 10;\n      this.global.presentToast('Bạn chỉ được dùng tối đa 10 file media.')\n    }\n  }\n  fileListToArray(fileList) {\n    return Array.prototype.slice.call(fileList);\n  }\n  removeFileFromList(filename) {\n    for (let i = this.mediaListToSend.length - 1; i >= 0; i--) {\n      if (this.mediaListToSend[i].name === filename) {\n        this.mediaListToSend.splice(i, 1);\n      }\n    }\n  }\n  validateInput() {\n    if (this.aboutUsInput.title == '' || this.aboutUsInput.detail == '')\n      this.global.presentToast('Các trường bắt buộc không thể bỏ trống');\n    else\n      this.createUpdateAboutUS()\n  }\n  createUpdateAboutUS() {\n    this.global.presentLoading('')\n    if (this.originalAboutUS == null) {\n      this.aboutusFirebaseController.createAboutUs(this.aboutUsInput).then(res => {\n        console.log(res)\n        this.aboutUsInput['id'] = res\n        this.originalAboutUS = this.aboutUsInput\n        this.global.dismissLoading()\n        this.global.presentToast('Cập nhật thành công!')\n\n        //update media if any\n        if (this.mediaListToSend.length > 0)\n          this.mediaUpload()\n        else\n          this.getCurrentAboutUS()\n      })\n        .catch(err => {\n          console.log(err)\n          this.global.dismissLoading()\n          this.global.presentToast('Đã có lỗi khi kết nối với hệ thống. Vui lòng thử lại sau')\n        })\n    }\n    else {\n      //Update old about us\n      this.aboutusFirebaseController.updateAboutUS('data', this.aboutUsInput).then(() => {\n        this.global.dismissLoading()\n        //update media if any\n        if (this.mediaListToSend.length > 0)\n          this.mediaUpload()\n        else\n          this.getCurrentAboutUS()\n      }).catch(err => {\n        this.global.dismissLoading()\n      })\n    }\n  }\n  mediaUpload() {\n    this.global.presentLoading('Đang upload các file media')\n    let promiseList = []\n    for (let media of this.mediaListToSend) {\n      promiseList.push(\n        this.fbservices.fbUploadFiles(media, 'aboutus').then(\n          res => {\n            //url return\n            console.log(res)\n            //saveurl to about us\n            this.fbservices.addMediaFileURLToDocumentObject(res, 'aboutus', this.originalAboutUS.id)\n          }\n        ).catch(err => {\n          console.log(err)\n        })\n      )\n    }\n    let self = this;\n    Promise.all(promiseList).then(function (values) {\n      console.log('All upload completed')\n      setTimeout(() => {\n        self.global.dismissLoading()\n        self.getCurrentAboutUS();\n      }, 1000);\n      self.mediaListToSend=[]\n    })\n      .catch(err => {\n        self.global.dismissLoading()\n      });\n  }\n\n  openListOfCurrentMedia() {\n    this.modificationMediaList = Array.from(this.originalAboutUS.mediaList)\n    this.editMedia = true\n  }\n  closeListOfCurrentMedia() {\n    this.editMedia = false\n    this.modificationMediaList = []\n  }\n  refreshModification() {\n    this.modificationMediaList = Array.from(this.originalAboutUS.mediaList)\n  }\n  deleteModification(item) {\n    if (item == null)\n      this.modificationMediaList = []\n    else\n      for (let i = this.modificationMediaList.length - 1; i >= 0; i--) {\n        if (this.modificationMediaList[i] === item) {\n          this.modificationMediaList.splice(i, 1);\n        }\n      }\n  }\n  reorderItems(indexes) {\n    let element = this.modificationMediaList[indexes.from];\n    this.modificationMediaList.splice(indexes.from, 1);\n    this.modificationMediaList.splice(indexes.to, 0, element);\n  }\n  confirmMediaModification() {\n    if (JSON.stringify(this.originalAboutUS.mediaList) == JSON.stringify(this.modificationMediaList)) {\n      //There is no modification, just exit\n      this.closeListOfCurrentMedia()\n    }\n    else {\n      let alert = this.alertCtrl.create({\n        title: 'Lưu ý',\n        message: 'Bạn có chắc chắn muốn cập nhật thay đổi?',\n        buttons: [\n          {\n            text: 'Không',\n            role: 'cancel',\n            handler: () => {\n              alert.dismiss();\n            }\n          },\n          {\n            text: 'Có',\n            handler: () => {\n              this.global.presentLoading('Sao lưu thay đổi')\n              let filesToDelete = this.originalAboutUS.mediaList.filter(x => this.modificationMediaList.indexOf(x) === -1);\n              console.log(filesToDelete)\n              let promiseList = []\n              for (let file of filesToDelete) {\n                //delete files after remove during modification\n                promiseList.push(this.fbservices.deleteFileFromfbStorage(file))\n              }\n              promiseList.push(this.fbservices.setMediaArrayToDocument(this.modificationMediaList, 'aboutus', this.originalAboutUS.id));\n              let self = this;\n              Promise.all(promiseList).then(function (values) {\n                self.global.dismissLoading()\n                self.global.presentToast('Sao lưu thành công')\n                self.closeListOfCurrentMedia();\n                self.getCurrentAboutUS();\n              })\n                .catch(err => {\n                  self.global.dismissLoading()\n                  self.global.presentToast('Đã có lỗi khi kết nối với hệ thống. Vui lòng thử lại sau')\n                });\n            }\n          }\n        ]\n      });\n      alert.present();\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/admin-aboutus/admin-aboutus.ts"],"sourceRoot":""}